var dn,
	fs,
	path;
(function(){
	fs=require('fs');
	path=require('path');
	dn={
		watch: function (name){
			var sname=name.split('.')[0];
			dn[sname]=require(name)[sname];
			var fpath='./node_modules/'+name;
			fs.watchFile(fpath, function (curr, prev) {
				if (curr.mtime!=prev.mtime){					
					delete require.cache[path.resolve(__dirname, name)];
					//dnvar=require(name)[name.split('.')[0]];
					dn[sname]=require(name)[sname];
				}
			});	
			console.log('stated watching:',name);
			//dn[name.split('.')[0]]=dnvar;
			//dn[sname]=require(name)[sname];
		},
		unwatch: function (name){
			fs.unwatch(name);
		},
		drop: function(name){
			delete require.cache[path.resolve(__dirname, name)];
		}
	}
})();
if (typeof exports !== 'undefined') exports.dn=dn;
console.log('loaded dn');