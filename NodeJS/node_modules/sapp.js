var	fs=require('fs'),
	path=require('path'),	
	app={
		dirname:'',
		contenttype: {
			'html': { 'Content-Type':'text/html'},
			'js':   { 'Content-Type':'text/javascript'},
			'css':  { 'Content-Type':'text/css'},
			'png':  { 'Content-Type':'image/png'}
			
		},	
		extname: function (url){
			var p=url.split('/'),
				lp=p[p.length-1];
			p=lp.split('.');
			lp=p[p.length-1];	
			return lp;
		},
		handler: function (req, res) {
			var parts=req.url.split('/');			
			switch(parts[1]){
				case 'ds':				
					switch(parts[2]){
						//A-R-G-S
						case 'add':						
							break;
						case 'rem':
							break;
						case 'get':
							break;
						case 'set':
							break;
					}
						
					//console.log('action:',parts[2],req.url);
					res.writeHead(200);
					res.end('datastore command:'+req.url.substring(1));									
					break;
				default:
					res.writeHead(200);
					res.end('not handled:'+req.url.substring(1));					
					break;
			}
			
			res.writeHead(200);
			res.end('not handled action');				
		}		
	};

for(var key in app){
	exports[key]=app[key];
}
console.log('loaded sapp');